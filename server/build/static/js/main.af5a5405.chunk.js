(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c.n(a),n=c(18),l=c.n(n),r=c(19),i=c(2),o=c(4),j=c(3),u=c(33),b=Object(u.a)("http://3.69.171.38:5000"),d=c(1);function m(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(""),l=Object(o.a)(n,2),u=l[0],m=l[1],O=Object(i.f)();Object(a.useEffect)((function(){b.on("login",(function(e){localStorage.setItem("sessionToken",e),localStorage.setItem("myEmail",c),""!==e?(O("/Chat"),console.log("Email, password correct")):(alert("Email, password incorrect"),O("/"))}))}),[O,c]);return Object(d.jsx)("div",{className:"d-flex align-items-center",style:{height:"100vh"},children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b.emit("login",c,u)},className:"container-sm",style:{width:"30vw"},children:[Object(d.jsx)("div",{className:"form-outline mb-4",children:Object(d.jsx)(j.c,{label:"Email",id:"typeEmail",required:!0,type:"email",value:c,onChange:function(e){s(e.target.value)},autoComplete:"username"})}),Object(d.jsx)("div",{className:"form-outline mb-4",children:Object(d.jsx)(j.c,{label:"Password",id:"typePassword",required:!0,type:"password",value:u,onChange:function(e){m(e.target.value)},autoComplete:"current-password"})}),Object(d.jsx)(j.a,{children:"Sign in"}),Object(d.jsx)("div",{className:"text-center mt-2",children:Object(d.jsxs)("p",{children:["Create new account? ",Object(d.jsx)(r.b,{to:"/Register",children:"Register"})]})})]})})}function O(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(""),l=Object(o.a)(n,2),u=l[0],m=l[1],O=Object(a.useState)(""),h=Object(o.a)(O,2),f=h[0],x=h[1],g=Object(a.useState)(""),v=Object(o.a)(g,2),p=v[0],w=v[1],y=Object(i.f)();Object(a.useEffect)((function(){b.on("createNewUser",(function(e){e?(console.log("Account registered"),y("/")):(alert("Email is already in use"),y("/Register"))}))}),[y]);return Object(d.jsx)("div",{className:"d-flex align-items-center mt-3 ms-2",style:{width:"100%",height:"100%"},children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b.emit("createNewUser",c,u,f,p),console.log("Submit")},children:[Object(d.jsxs)("div",{className:"row mb-4",children:[Object(d.jsx)("div",{className:"col form-outline",children:Object(d.jsx)(j.c,{type:"text",label:"First name",id:"firstName",value:c,required:!0,onChange:function(e){s(e.target.value)}})}),Object(d.jsx)("div",{className:"col form-outline",children:Object(d.jsx)(j.c,{label:"Last name",type:"text",id:"lastName",value:u,required:!0,onChange:function(e){m(e.target.value)}})})]}),Object(d.jsx)("div",{className:"form-outline mb-4",children:Object(d.jsx)(j.c,{label:"Email address",type:"email",id:"emailAddress",value:f,required:!0,onChange:function(e){x(e.target.value)},autoComplete:"username"})}),Object(d.jsx)("div",{className:"form-outline mb-4",children:Object(d.jsx)(j.c,{label:"Password",type:"password",id:"typePassword",value:p,required:!0,onChange:function(e){w(e.target.value)},autoComplete:"current-password"})}),Object(d.jsx)(j.a,{children:"Sign up"}),Object(d.jsx)(r.b,{className:"ms-1",to:"/",children:Object(d.jsx)(j.a,{children:"Back"})})]})})}var h=c(20),f=c(28);function x(){var e=localStorage.getItem("sessionToken"),t=localStorage.getItem("myEmail"),c=Object(i.f)(),s=Object(a.useState)(""),n=Object(o.a)(s,2),l=n[0],u=n[1],m=Object(a.useState)([]),O=Object(o.a)(m,2),x=O[0],g=O[1],v=Object(a.useState)(""),p=Object(o.a)(v,2),w=p[0],y=p[1],N=Object(a.useState)(""),S=Object(o.a)(N,2),C=S[0],E=S[1],k=Object(a.useState)([]),I=Object(o.a)(k,2),q=I[0],M=I[1],A=Object(a.useRef)(0),R=Object(a.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]);Object(a.useEffect)((function(){return l&&(A.current=setInterval((function(){b.emit("setActive",l)}),3e3)),function(){clearInterval(A.current)}}),[l]),Object(a.useEffect)((function(){null===e|null===t&&(alert("No session token or email"),c("/")),null!==t&&u(t),b.emit("getContacts",t),b.on("getContacts",(function(e){g(e)})),b.on("getMessages",(function(e){M(e)})),b.on("chatMessage",(function(e){e.from!==w&&M([].concat(Object(f.a)(q),[{message:e,from:w,to:l}]))}))}),[t,e,c,q,w,l]);return Object(d.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(d.jsx)("div",{className:"d-flex flex-row justify-content-end border",children:Object(d.jsx)(r.b,{className:"d-flex mt-1 mb-1 mx-1",to:"/",children:Object(d.jsx)(j.a,{onClick:function(){localStorage.clear()},children:"Logout"})})}),Object(d.jsx)("form",{onSubmit:function(e){e.preventDefault(),b.emit("chatMessage",C,l,{to:w}),E(""),M([].concat(Object(f.a)(q),[{message:C,from:l,to:w}]))},children:Object(d.jsxs)("div",{className:"d-flex align-items-start",children:[Object(d.jsx)("div",{children:Object(d.jsx)(j.b,{className:"d-flex-column border overflow-auto",style:{width:"20vw",height:"92.5vh"},children:Object(d.jsx)("div",{children:function(){var e,t=[],c=Object(h.a)(x);try{var a=function(){var c=e.value;t.push(Object(d.jsx)(j.e,{flush:!0,children:Object(d.jsxs)(j.f,{action:!0,active:w===c.email,onClick:function(){y(c.email),b.emit("getMessages",l,c.email)},children:[c.username," ",c.surname]},c.email)},c.email))};for(c.s();!(e=c.n()).done;)a()}catch(s){c.e(s)}finally{c.f()}return t}()})})}),Object(d.jsxs)(j.b,{children:[Object(d.jsx)(j.g,{className:"mx-1 overflow-auto",style:{height:"82.5vh"},children:Object(d.jsx)("div",{children:function(){var e,t=[],c=0,a=t.length===c,s=Object(h.a)(q);try{for(s.s();!(e=s.n()).done;){var n=e.value;t.push(Object(d.jsx)(j.e,{flush:!0,style:{},children:Object(d.jsx)(j.f,{className:"".concat(n.from===l?"align-self-end align-items-end":"align-items-start align-self-start"),id:"messages",ref:a?R:null,children:Object(d.jsx)(j.e,{className:"rounded px-2 py-1 ".concat(n.from===l?"bg-primary text-white":"border"),children:n.message})})},c)),c++}}catch(r){s.e(r)}finally{s.f()}return t}()})}),Object(d.jsx)("div",{children:Object(d.jsx)(j.g,{className:"d-flex overflow-auto",style:{height:"10vh",width:"100%"},children:Object(d.jsxs)(j.d,{noWrap:!0,children:[Object(d.jsx)(j.c,{label:"Message",id:"textArea",value:C,required:!0,textarea:!0,rows:2,style:{width:"73vw"},onChange:function(e){E(e.target.value)}}),Object(d.jsx)(j.a,{children:"Send"})]})})})]})]})})]})}var g=function(){return Object(d.jsx)(r.a,{className:"App",children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/",element:Object(d.jsx)(m,{}),exact:!0}),Object(d.jsx)(i.a,{path:"/Register",element:Object(d.jsx)(O,{})}),Object(d.jsx)(i.a,{path:"/Chat",element:Object(d.jsx)(x,{})}),Object(d.jsx)(i.a,{element:Error})]})})};c(47);l.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.af5a5405.chunk.js.map